#pragma checksum "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Index), @"mvc.1.0.view", @"/Views/Home/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\_ViewImports.cshtml"
using CoreCommerce;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\_ViewImports.cshtml"
using CoreCommerce.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b", @"/Views/Home/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4fdd06950218a364238a46094ac4cae201a28778", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Home_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<CoreCommerce.Models.Product>>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "1", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "2", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
  
    ViewData["Title"] = "Home Page";
    var parameters = ViewBag.parameters;
    var productDiplayed = new List<Product>();

    string DropdownMLCategories(int parentId = 0, string submark = "", int selected = 0)
    {
        string html = "";
        foreach (var cat in (IList<Category>)ViewData["CategoryId"])
        {
            if (cat.ParentId == parentId)
            {
                var hasChild = false;
                foreach (var child in (IList<Category>)ViewData["CategoryId"])
                {
                    if (child.ParentId == cat.CategoryId) { hasChild = true; }
                }
                if (hasChild == false)
                {
                    html += "'<option value=\"" + @cat.CategoryId + "\">";
                }
                else
                {
                    html += "'<option disabled value=\"" + @cat.CategoryId + "\">";
                }
                if (selected == cat.CategoryId) { html += " selected "; }
                html += ">" + submark + cat.Name + "</option>";

                html += DropdownMLCategories(cat.CategoryId, submark + "--");
            }
        }

        return html;
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<!-- Button trigger modal -->
<button type=""button"" id=""cartButton"" class=""btn btn-success"" data-toggle=""modal"" data-target=""#cart"">
    Panier:vide
</button>
<!-- Modal -->
<div class=""modal fade"" id=""cart"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalCenterTitle"" aria-hidden=""true"">
    <div class=""modal-dialog modal-lg modal-dialog-centered"" role=""document"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h5 class=""modal-title"" id=""exampleModalLongTitle"">Mon Panier</h5>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
                <table class=""table table-bordered"" id=""listCart"">
                    <thead class=""thead-light"">
                        <tr>
                            <th>Nom</th>

                            <th>Quantite</th>
");
            WriteLiteral(@"                            <th>Prix Unit</th>
                            <th>Prix</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id=""bodyListCart""></tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td>Total</td>
                            <td align=""right"" id=""total""></td>
                        </tr>
                    </tfoot>
                </table>
                <div id=""commandCart"" style=""display: none;"">
                    <button type=""button"" class=""save btn btn-primary"">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>
</div>
<br />
<div id=""loader""></div>
");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b7365", async() => {
                WriteLiteral("\r\n    <div class=\"form-inline\">\r\n        <select id=\"categories\" class=\"form-control-sm \">\r\n            ");
#nullable restore
#line 86 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
       Write(Html.Raw(DropdownMLCategories()));

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n        </select>\r\n        <select id=\"productsByPage\" class=\"form-control-sm\">\r\n");
#nullable restore
#line 89 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
             for (int i = 1; i < 4; i++)
            {
                if (i == parameters.productsByPage)
                {

#line default
#line hidden
#nullable disable
                WriteLiteral("                    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b8424", async() => {
#nullable restore
#line 93 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                                         Write(i);

#line default
#line hidden
#nullable disable
                    WriteLiteral(" par page");
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                BeginWriteTagHelperAttribute();
#nullable restore
#line 93 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                      WriteLiteral(i);

#line default
#line hidden
#nullable disable
                __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
                __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
                BeginWriteTagHelperAttribute();
                __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
                __tagHelperExecutionContext.AddHtmlAttribute("selected", Html.Raw(__tagHelperStringValueBuffer), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.Minimized);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n");
#nullable restore
#line 94 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                }
                else
                {

#line default
#line hidden
#nullable disable
                WriteLiteral("                    ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b10921", async() => {
#nullable restore
#line 97 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                                Write(i);

#line default
#line hidden
#nullable disable
                    WriteLiteral(" par page");
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                BeginWriteTagHelperAttribute();
#nullable restore
#line 97 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                      WriteLiteral(i);

#line default
#line hidden
#nullable disable
                __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = __tagHelperStringValueBuffer;
                __tagHelperExecutionContext.AddTagHelperAttribute("value", __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n");
#nullable restore
#line 98 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                }
            }

#line default
#line hidden
#nullable disable
                WriteLiteral("        </select>\r\n        <select id=\"sort\" class=\"form-control-sm\">\r\n            ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b13132", async() => {
                    WriteLiteral("Nom croissant");
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_0.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
                BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "selected", 1, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 102 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
AddHtmlAttributeValue("", 3821, parameters.sort == 1, 3821, 23, false);

#line default
#line hidden
#nullable disable
                EndAddHtmlAttributeValues(__tagHelperExecutionContext);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n            ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fa9c4d6c0abacaff21ffd3f7fceb7020e945ea7b14860", async() => {
                    WriteLiteral("Nom décroissant");
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_1.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
                BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "selected", 1, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 103 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
AddHtmlAttributeValue("", 3910, parameters.sort == 2, 3910, 23, false);

#line default
#line hidden
#nullable disable
                EndAddHtmlAttributeValues(__tagHelperExecutionContext);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral("\r\n        </select>\r\n        <div class=\"input-group\">\r\n            <div class=\"input-group-append\">\r\n                <input type=\"search\" id=\"string\" name=\"string\" class=\"form-control\" aria-label=\"recherche\"");
                BeginWriteAttribute("placeholder", " placeholder=", 4167, "", 4202, 1);
#nullable restore
#line 107 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
WriteAttributeValue("", 4180, parameters.searchTerm, 4180, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(@">
            </div>
            <div class=""input-group-append"">
                <button id=""search"" type=""button"" class=""btn btn-outline-primary"">Rechercher</button>
            </div>
        </div>
    </div>

    <nav>
        <ul id=""pagination"" class=""pagination justify-content-center"">
            <li class=""page-item""><a class=""page-link"" href=""#"">Previous</a></li>
            <li class=""page-item""><a class=""page-link"" href=""#"">1</a></li>
            <li class=""page-item""><a class=""page-link"" href=""#"">2</a></li>
            <li class=""page-item""><a class=""page-link"" href=""#"">3</a></li>
            <li class=""page-item""><a class=""page-link"" href=""#"">Next</a></li>
        </ul>
    </nav>

");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n\r\n<div class=\"container\">\r\n    <div class=\"row\" id=\"productCards\">\r\n    </div>\r\n</div>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script>
        function sorting(a, b) {
            if (a.name == b.name) {
                return 0;
            } else if (a.name > b.name) {
                return 1;
            }
            return -1;
        }

        $(document).ready(function () {
            $.showPage = function () {
                if (nbProducts > 0) {//50
                    //var nbProductsByPage = $(""#productsByPage"").children(""option:selected"").val();//2
                    var nbPagesTotal = Math.ceil(nbProducts / parameters.productsByPage);// 50/2 = 25
                    //var nbPagesAffichable = 2;//1 à 10,11 à 20..;
                    //var FirstPageAffiché = 1;// 1,11,21 par bouton preview/next
                    var pagination = $('#pagination');
                    pagination.empty();
                    if (FirstPageAffiché > nbPagesAffichable) {
                        pagination.append('<li class=""page-item""><a class=""page-link"" href=""#"">Previous</a></li>');
                    }
  ");
                WriteLiteral(@"                  for (i = FirstPageAffiché; i <= Math.min(nbPagesTotal, FirstPageAffiché + nbPagesAffichable-1); i++) {
                        pagination.append('<li class=""page-item""><a class=""page-link"" href=""#"">' + i + '</a></li>');
                    }
                    if (nbPagesTotal > FirstPageAffiché + nbPagesAffichable - 1) {//25>10
                        pagination.append('<li class=""page-item""><a class=""page-link"" href=""#"">Next</a></li>');
                    }
                }
            };

            $.showProducts = function (page) {
                console.log(parameters);

                nbProducts=0

                var data = ");
#nullable restore
#line 170 "D:\VS2019 Solutions\CoreCommerce\CoreCommerce\CoreCommerce\Views\Home\Index.cshtml"
                      Write(Html.Raw(Json.Serialize(@Model)));

#line default
#line hidden
#nullable disable
                WriteLiteral(@";
                var productSelected = [];
                //recherche
                $.each(data, function (index, product) {
                    if ((product[""categoryId""] == parameters.categoryId) &&
                        (product[""name""].indexOf(parameters.searchTerm) != -1))
                    {
                        productSelected.push(product);
                    };
                });
                //tri
                productSelected.sort(sorting);
                if (parameters.sort == ""2"") { productSelected.reverse(); }
                //affichage
                var productCards = $('#productCards');
                productCards.empty();
                $.each(productSelected, function (index, product) {
                    nbProducts++;
                    if (nbProducts > parameters.productsByPage * (page - 1) &&
                        nbProducts <= parameters.productsByPage * page) {
                        col = $('<div class=""col-xs-12 col-sm-6 col-md-4 col-lg");
                WriteLiteral(@"-4 text-center""></div>');
                        card = $(' <div class=""card bg-info""></div>');
                        cardimg = $('<img class=""card-img-top img-fluid"" src=""/image/' + product[""image""] + '"" style=""width:100%; height:40vh; object-fit:cover;"" alt=""Card image cap"">');
                        cardbody = $(' <div class=""card-body""></div>');
                        cardbody.append($('<h4 class=""card-title text-center"">' + product[""name""] + '</h4>'));
                        cardbody.append($('<h5 class=""card-text"">' + parseFloat(product[""price""]).toFixed(2) + ' €</h5>'));
                        cardbody.append($('<p class=""card-text"">' + product[""detail""] + '</p>'));
                        cardbody.append($('<button type=""button"" class=""add btn btn-success"" data-product=\'' + JSON.stringify(product) + '\' name=""' + product[""price""] + '"" value=' + product[""productId""] + '>Ajouter au panier</button><br>'));
                        cardfooter = $(' <div class=""card-footer"" style=""height:10p");
                WriteLiteral(@"x; background-color:white""></div>');
                        card.append(cardimg);
                        card.append(cardbody);
                        card.append(cardfooter);
                        col.append(card);
                        productCards.append(col);
                    };
                });
            }

            $(""#categories"").change(function () {
                parameters.categoryId = $(this).val();
                $.showProducts(page);
                $.showPage();
            });

            $("".pagination"").on('click', 'a', function () {
                var nextpage = $(this).html();
                if (nextpage == ""Next"") {
                    FirstPageAffiché += nbPagesAffichable;
                    nextpage = FirstPageAffiché;
                }
                if (nextpage == ""Previous"") {
                    FirstPageAffiché -= nbPagesAffichable;
                    nextpage = FirstPageAffiché;
                }
                $.showPage();
 ");
                WriteLiteral(@"               $.showProducts(nextpage);
            });

            $(""#sort"").change(function () {
                parameters.sort = $(this).val();
                $.showProducts(page);
            });

            $(""#search"").click(function () {
                parameters.searchTerm = $(""#string"").val();
                $.showProducts(page);
                $.showPage();
            });

            $(""#productsByPage"").change(function () {
                parameters.productsByPage = $(this).val();
                $.showPage();
                $.showProducts(page);
            });

        //Cart gestion
            $.initCart = function () {
                var cart = {};
                cart.products = [];
                localStorage.setItem('cart', JSON.stringify(cart));
            };

            //add Product to Cart
            $('#productCards').on(""click"", ""button.add"", function () {
                var addProduct = ($(this).data(""product""));
                var fl");
                WriteLiteral(@"ag = true;
                var pid = addProduct.productId;
                var cart = JSON.parse(localStorage.getItem('cart'));
                total = 0;
                if (cart.products.length == 0) {
                    $('#commandCart').show();
                }
                //cherche si nouveau produit
                if (localStorage && localStorage.getItem('cart')) {
                    $.each(cart.products, function (key, value) {
                        if (value.productId == pid) {
                            flag = false;
                        }
                        total += value.quantity * value.price;
                    });
                }
                if (flag) {
                    addProduct.productId = $(this).attr(""value"");
                    addProduct.quantity = 1;
                    cart.products.push(addProduct);
                    localStorage.setItem('cart', JSON.stringify(cart));

                    var bodyListCart = $('#bodyListCart');
    ");
                WriteLiteral(@"                row = $('<tr></tr>');
                    row.append($('<td>' + addProduct.name + '</td>'));
                    row.append($('<td><input style=""width:5rem !important;"" type=""number"" id=""' + addProduct.productId + '"" class=""quantity"" value=""1"" min=""1""></td>'));
                    row.append($('<td align=""right"" class=""punit"">' + parseFloat(addProduct.price).toFixed(2) + ' €</td>'));
                    row.append($('<td align=""right"" class=""price"">' + parseFloat(addProduct.price).toFixed(2) + ' €</td>'));
                    row.append($('<td><button type=""button"" class=""delete btn btn-danger"" value=' + addProduct.productId + '>Supprimer</button></td>'));
                    bodyListCart.append(row);
                    total += addProduct.price;
                    $('#total').html(parseFloat(total).toFixed(2) + ' €');
                    $(""#cartButton"").html('Panier:' + parseFloat(total).toFixed(2) + ' €');
                }
            });


            $('#bodyListCart').on");
                WriteLiteral(@"('input', 'input.quantity', function () {
                var qty = $(this).val();
                var punit = parseFloat($(this).closest('tr').find('.punit').html());
                $(this).closest('tr').find('.price').html(parseFloat(punit * qty).toFixed(2) + ' €');
                var cart = JSON.parse(localStorage.getItem('cart'));
                var id = $(this).attr(""id"");
                total = 0;
                $.each(cart.products, function (key, value) {
                    if (value.productId == id) {
                        value.quantity = qty;
                    }
                    total += value.quantity * value.price;
                });

                $('#total').html((parseFloat(total).toFixed(2)) + ' €');
                $(""#cartButton"").html('Panier:' + parseFloat(total).toFixed(2) + ' €');
                localStorage.setItem('cart', JSON.stringify(cart));
            })

            $('#bodyListCart').on(""click"", ""button.delete"", function () {
               ");
                WriteLiteral(@" var cart = JSON.parse(localStorage.getItem('cart'));
                var id = $(this).attr(""value"");
                total = 0;
                $.each(cart.products, function (index, value) {
                    if (value.productId == id) {
                        cart.products.splice(index, 1);
                        localStorage.setItem('cart', JSON.stringify(cart));
                    } else {
                        total += value.quantity * value.price;
                    }
                });
                if (cart.products.length == 0) {
                    $('#commandCart').hide();
                }
                $('#total').html((parseFloat(total).toFixed(2)) + ' €');
                $(this).closest('tr').remove();
                $(""#cartButton"").html('Panier:' + parseFloat(total).toFixed(2) + ' €');
            });

            $('#commandCart').on(""click"", ""button.save"", function () {
                var Sale = new Object();
                Sale.SalePrice = total;
   ");
                WriteLiteral(@"             Sale.SaleDate = new Date();
                var result = JSON.stringify(Sale);
                $.ajax({
                    url: '../api/SalesAPI/',
                    type: 'POST',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    data: result,
                    success: function (data, textStatus, xhr) {

                        var cart = JSON.parse(localStorage.getItem('cart'));
                        var SaleDetail = new Object();
                        $.each(cart.products, function (index, value) {
                            SaleDetail.UnitPrice = value.price;
                            SaleDetail.Quantity = parseInt(value.quantity);
                            SaleDetail.ProductId = parseInt(value.productId);
                            SaleDetail.SaleId = data.saleId;
                            var result = JSON.stringify(SaleDetail);
                            console.log(result);
   ");
                WriteLiteral(@"                         $.ajax({
                                url: '../api/SaleDetailsAPI/',
                                type: 'POST',
                                contentType: 'application/json; charset=utf-8',
                                dataType: 'json',
                                data: result,
                                success: function (data, textStatus, xhr) {
                                    console.log(data);
                                },
                                error: function (xhr, textStatus, errorThrown) {
                                    console.log('Error in detail');
                                }
                            });
                        });
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        console.log('Error in Operation');
                    }

                });
                $('#commandCart').hide();
            });

            //Initia");
                WriteLiteral(@"te
            var parameters = { categoryId:3,productsByPage:1,sort:1,searchTerm:""""};
            var nbProducts;
            var total = 0;
            var page = 1;
            var nbPagesAffichable = 2;//1 à 10,11 à 20..;
            var FirstPageAffiché = 1;// 1,11,21 par bouton preview/next
            $.initCart();
            $.showProducts();
            $.showPage();
        });
    </script>
");
            }
            );
            WriteLiteral("\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<CoreCommerce.Models.Product>> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
